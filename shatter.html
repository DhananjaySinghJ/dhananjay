<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Natural Text Shatter Effect with Matter.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body {
            margin: 0;
            background: #000;
            color: #FB923C;
            font-family: monospace;
            min-height: 300vh;
            overflow-x: hidden;
        }

        .container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 800px;
            text-align: center;
        }

        .scroll-guide {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #FB923C;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="text">I'm Dhananjay Singh, a Creative Developer with a passion for bringing ideas to life through design and technology...</div>
    </div>
    <div class="scroll-guide">Scroll down to shatter text â†“</div>
    <script>
        const { Engine, Render, World, Bodies, Body, Events } = Matter;
let engine = Engine.create();
let render = Render.create({
    element: document.body,
    engine: engine,
    options: {
        width: window.innerWidth,
        height: window.innerHeight,
        background: 'transparent',
        wireframes: false,
    }
});

let textElement = document.getElementById('text');
let isShattered = false;
let particles = [];
let originalPositions = [];

function createParticles() {
    const text = textElement.textContent;
    const rect = textElement.getBoundingClientRect();
    textElement.style.opacity = 0;

    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    ctx.font = getComputedStyle(textElement).font;

    text.split('').forEach((char, index) => {
        if (char.trim() === '') return;

        const charWidth = ctx.measureText(char).width * 2;
        const charHeight = parseInt(getComputedStyle(textElement).fontSize, 10) * 2;
        let x = rect.left + ctx.measureText(text.substring(0, index)).width * 2;
        let y = rect.top;

        let body = Bodies.rectangle(x, y, charWidth, charHeight, {
            restitution: 0.6, 
            friction: 0.1,
            render: {
                sprite: {
                    texture: getLetterTexture(char, charWidth, charHeight),
                    xScale: 1,
                    yScale: 1
                }
            }
        });

        Body.setVelocity(body, { x: (Math.random() - 0.5) * 5, y: -Math.random() * 10 });
        originalPositions.push({ body, x, y });
        World.add(engine.world, body);
        particles.push(body);
    });
}

function getLetterTexture(char, width, height) {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = width;
    canvas.height = height;
    ctx.font = `${height / 2}px monospace`;
    ctx.fillStyle = '#FB923C';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(char, canvas.width / 2, canvas.height / 2);
    return canvas.toDataURL();
}

window.addEventListener('scroll', () => {
    const scrollProgress = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight);
    
    if (!isShattered && scrollProgress > 0.2) {
        isShattered = true;
        createParticles();
        Engine.run(engine);
        Render.run(render);
    } else if (isShattered && scrollProgress < 0.2) {
        isShattered = false;
        reassembleText();
    } else if (isShattered && scrollProgress > 0.6) {
        fadeAwayParticles();
    }
});

function reassembleText() {
    particles.forEach((body, index) => {
        const target = originalPositions[index];
        Body.setVelocity(body, { x: 0, y: 0 });
        Body.setPosition(body, { x: target.x, y: target.y });
    });
}

function fadeAwayParticles() {
    particles.forEach((body) => {
        setTimeout(() => {
            World.remove(engine.world, body);
        }, Math.random() * 1000);
    });
}

const ground = Bodies.rectangle(window.innerWidth / 2, window.innerHeight + 50, window.innerWidth, 100, {
    isStatic: true,
    render: { visible: false }
});
World.add(engine.world, ground);


    </script>
</body>
</html>